<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>大圖輸出計算機</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.bootstrap5.min.css">
    <link rel="stylesheet" href="sizeModal.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container mt-5">
        <form id="calculatorForm" class="custom-form mt-4 p-4" aria-labelledby="form-title">
            <h1 id="form-title" class="text-center mb-3 fade-in-up">
                <i class="fa fa-print me-2"></i>大圖輸出計算機
            </h1>

            <!-- 材質選擇 -->
            <div class="mb-3 material-section">
                <label for="material" class="form-label">
                    <i class="fa fa-layer-group me-2"></i> 選擇材質
                </label>
                <select id="material" class="form-select" required></select>
                
                <!-- 新增裁小模選項 -->
                <div class="form-check mt-2">
                    <input class="form-check-input" type="checkbox" id="trimCheckbox">
                    <label class="form-check-label" for="trimCheckbox">裁小模</label>
                </div>
            </div>

            <!-- 添加分隔線 -->
            <hr class="section-divider">

            <!-- 尺寸組 -->
            <div class="mb-3 dimension-section">
                <label class="form-label">
                    <i class="fa fa-ruler-combined me-2"></i> 尺規數量
                </label>
                <div id="dimensionContainer" class="dimension-container">
                    <!-- 每個尺寸組會有一個編號標籤 -->
                    <div class="dimension-group mb-3 d-flex align-items-center">
                        <span class="dimension-number">1</span>
                        <input type="number" class="form-control length-input" placeholder="長度 (cm)" required
                            step="0.1" min="0.1">
                        <input type="number" class="form-control width-input" placeholder="寬度 (cm)" required step="0.1"
                            min="0.1">
                        <input type="number" class="form-control quantity-input" placeholder="數量" required min="1">
                        <button type="button" class="btn btn-danger btn-remove-dimension"><i
                                class="fa fa-trash"></i></button>
                    </div>
                </div>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <!-- 開啟彈出視窗的按鈕 -->
                    <button type="button" class="btn btn-info fade-in-up" data-bs-toggle="modal"
                        data-bs-target="#sizeModal">
                        <i class="fa fa-list me-2"></i> 常用尺寸
                    </button>
                    <button type="button" class="btn btn-secondary btn-add-dimension fade-in-up">
                        <i class="fa fa-plus"></i> 新增尺寸組
                    </button>
                </div>
            </div>

            <!-- 重置和提交按鈕的 footer -->
            <footer class="form-footer d-flex justify-content-between mt-4">
                <button type="reset" class="btn btn-reset btn-lg fade-in-up">
                    <i class="fa fa-rotate-left me-2"></i>重置
                </button>
                <button type="submit" class="btn btn-submit btn-lg fade-in-up">
                    <i class="fa fa-check me-2"></i>提交
                </button>
            </footer>
        </form>
    </div>
    <!-- 新增結果表格 -->
    <div class="container mt-5">
        <h2 class="text-center mb-4">輸出清單</h2>
        <table class="table table-bordered output-list-table" id="resultTable">
            <thead>
                <tr>
                    <th>材質</th>
                    <th>尺寸</th>
                    <th>數量</th>
                    <th>單價</th> <!-- 新增欄位 -->
                    <th>金額</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <!-- 範例資料列，JavaScript 中會自動填充 -->
            </tbody>            
        </table>
    </div>

    <!-- 彈出視窗 -->
    <div class="modal fade" id="sizeModal" tabindex="-1" aria-labelledby="sizeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="sizeModalLabel">
                        <i class="fas fa-ruler-combined"></i> 常用尺寸選擇
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- 常用尺寸選擇區 -->
                    <div id="commonSizesSection" class="mb-3 common-sizes-section">
                        <!-- 海報常用尺寸 -->
                        <h5 class="collapsible-title d-flex align-items-center" data-bs-toggle="collapse"
                            data-bs-target="#commonSizes" aria-expanded="true" aria-controls="commonSizes">
                            <i class="fa fa-chevron-right me-2 toggle-icon"></i>
                            <span>海報常用尺寸</span>
                        </h5>
                        <div id="commonSizes" class="collapse">
                            <button type="button" class="btn btn-outline-primary size-option" data-length="14.8"
                                data-width="21">A5 (14.8x21cm)</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="21"
                                data-width="29.7">A4 (21x29.7cm)</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="29.7"
                                data-width="42">A3 (29.7x42cm)</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="42"
                                data-width="59.4">A2 (42x59.4cm)</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="59.4"
                                data-width="84.1">A1 (59.4x84.1cm)</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="84.1"
                                data-width="118.9">A0 (84.1x118.9cm)</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="50"
                                data-width="70.7">B2 (50x70.7cm)</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="70.7"
                                data-width="100">B1 (70.7x100cm)</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="100"
                                data-width="141.4">B0 (100x141.4cm)</button>
                        </div>

                        <!-- 布條常用尺寸 -->
                        <h5 class="collapsible-title d-flex align-items-center mt-3" data-bs-toggle="collapse"
                            data-bs-target="#bannerSizes" aria-expanded="false" aria-controls="bannerSizes">
                            <i class="fa fa-chevron-right me-2 toggle-icon"></i>
                            <span>布條常用尺寸</span>
                        </h5>
                        <div id="bannerSizes" class="collapse">
                            <button type="button" class="btn btn-outline-primary size-option" data-length="30"
                                data-width="90">30x90cm</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="45"
                                data-width="120">45x120cm</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="60"
                                data-width="180">60x180cm</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="75"
                                data-width="225">75x225cm</button>
                            <button type="button" class="btn btn-outline-primary size-option" data-length="90"
                                data-width="270">90x270cm</button>
                        </div>
                    </div>
                    <!-- 添加分隔線 -->
                    <hr class="modal-divider">

                    <!-- 選擇要填入現有尺寸組還是新增 -->
                    <div class="mb-3">
                        <label class="d-flex align-items-center form-label mb-2">
                            <i class="fa fa-ruler-combined modal-icon me-2"></i>尺寸組
                        </label>
                        </label>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="sizeOption" id="fillExisting"
                                value="existing" checked>
                            <label class="form-check-label" for="fillExisting">選擇尺寸組</label>
                        </div>
                        <div id="existingGroupSelect" class="mb-3">
                            <select id="selectGroup" class="form-select">
                                <!-- 選項由JavaScript生成 -->
                            </select>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="sizeOption" id="addNew" value="new">
                            <label class="form-check-label" for="addNew">新增尺寸組</label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="confirmButton">確認</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
    <script src="sizeModal.js"></script>
    <script src="scripts.js"></script>
    <script>
        // 初始化 Bootstrap Tooltips
        document.addEventListener('DOMContentLoaded', function () {
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            tooltipTriggerList.forEach(function (tooltipTriggerEl) {
                new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });
    </script>    
    
</body>

</html>